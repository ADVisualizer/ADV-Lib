dist: trusty
language: java
jdk:
  - oraclejdk9

# Cache gradle
before_cache:
- rm -f  $HOME/.gradle/caches/modules-2/modules-2.lock
- rm -fr $HOME/.gradle/caches/*/plugin-resolution/

cache:
  directories:
  - "$HOME/.gradle/caches/"
  - "$HOME/.gradle/wrapper/"


# Upload test coverage to coday
#env:
#  global:
#    CODACY_PROJECT_TOKEN=e94bc0883d6c43fd8c5741b9d71a007f

#before_install:
#  - sudo apt-get install jq
#  - wget -O ~/codacy-coverage-reporter-assembly-latest.jar $(curl https://api.github.com/repos/codacy/codacy-coverage-reporter/releases/latest | jq -r .assets[0].browser_download_url)

#after_success:
#  - java -jar ~/codacy-coverage-reporter-assembly-latest.jar -l Java -r build/reports/jacoco/jacocoRootReport/jacocoRootReport.xml


# Automatic Github deploy of the adv-lib jar for tagged commits
deploy:
  provider: releases
  api_key:
    secure: RgEpe+YRA+PtfF5ZgYt5mteJEBIXw0WWMHMckRr5kJI3doe6P7GjOFKYTW5WsnkB40lPhcJKBbOyKHBel6qH+ISKA8LFulFJhReTTz55AHvLON0S1DfSqTwERf7Hc8nal5u8i7GLitLHrghlJTMiAoGbdJ7jVXmSejIsIs2q/etNV3x1bppcEtCqxn1jcMG591FDQQWsOgjxJLB2/rv30/pCN9CCF3oj2Ab56LK2Z1DUp+unvY/LxwuspDlsC2TNqmEI2SsKOCfGd6p/RLqdy5O/2/7Pt/kvUG48+KKae/g91IaMhXGT1StzRdZhpSb9aBwS3S3/il2A5t8MN1oJ+qaibJDwGq+iCFH7tQ3mBvq3j3xtoR7TRAwW1z3gvKnl/fuEbj10HcA7Mo8qdvunhCGGn9fOaIs/DgOv2AuwPwrezgfKb7GtkgDxtjzdck2xnaBjbSIwRaOfDjPZsxk+8/xYvGn1JJwasoUxbkgbt/DovOt8j2WS/Fd/tdwtyQFnYHzZJuZGnLzIP7YarueMT3baen0g9b+Zx5+y5V3iDJctP+IxGD8Iasm89QLkRZ1GPGB/MH5Nt3xF1vMhxX2yZsPvQVLAOergTcQfgv+3+UJN3GQLb7IgfRVGv+ENoJNIVsbF6xQKOXUj17wfK4d2NWGBqVM9pcyJIgaveUr7kZY=
  file: "build/libs/adv-lib-0.1.jar"
  skip_cleanup: true
  on:
    tags: true
